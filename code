import pandas as pd
import yfinance as yf
import matplotlib.pyplot as plt

stock = "AAPL"
start_date = "2020-01-01"
end_date = "2024-01-01"

data = yf.download(stock, start=start_date, end=end_date, auto_adjust=True)

prices = data["Close"]

plt.figure(figsize=(10,5))
plt.plot(prices)
plt.title("AAPL Price Time Series")
plt.xlabel("Date")
plt.ylabel("Price")
plt.show()

returns = prices.pct_change().dropna()

plt.figure(figsize=(10,5))
plt.plot(returns)
plt.title("Daily Returns Time Series")
plt.xlabel("Date")
plt.ylabel("Return")
plt.show()

mean_return = returns.mean()
volatility = returns.std()

print(mean_return)
print(volatility)

rolling_mean = prices.rolling(window=20).mean()

plt.figure(figsize=(10,5))
plt.plot(prices)
plt.plot(rolling_mean)
plt.title("Price with Moving Average")
plt.show()
